-- B74404A.ADA

-- CHECK THAT VARIABLES AND CONSTANTS OF A LIMITED PRIVATE TYPE CANNOT
-- BE COMPARED FOR EQUALITY (OR INEQUALITY) OUTSIDE THE PACKAGE DEFINING
-- THE TYPE, NOR CAN THEY BE ASSIGNED TO OR GIVEN INITIAL VALUES.

-- RJW 1/7/86

PROCEDURE B74404A IS

     PACKAGE PKG IS

          TYPE LIM_TYPE IS LIMITED PRIVATE;
          TYPE LIM_PTR_TYPE IS LIMITED PRIVATE;
          TYPE PTR_TYPE IS ACCESS LIM_TYPE;

          EC1, EC2 : CONSTANT LIM_TYPE;

     PRIVATE

          TYPE LIM_TYPE IS NEW INTEGER;
          TYPE LIM_PTR_TYPE IS ACCESS LIM_TYPE;

          EC1, EC2 : CONSTANT LIM_TYPE := 3;

     END PKG;

     USE PKG;

     E1, E2 : LIM_TYPE;
     LP1, LP2 : LIM_PTR_TYPE;
     P1, P2 : PTR_TYPE;
     E3 : LIM_TYPE := EC1;      -- ERROR: ILLEGAL INITIALIZATION.

BEGIN

     E1 := EC1;                 -- ERROR: ASSIGNMENT NOT ALLOWED.
     E1 := 2;                   -- ERROR: TYPE MISMATCH.
     LP1 := LP2;                -- ERROR: ASSIGNMENT NOT ALLOWED.
     P1.ALL := P2.ALL;          -- ERROR: ASSIGNMENT NOT ALLOWED.

     IF EC1 = EC2 THEN          -- ERROR: COMPARISON NOT ALLOWED.
          NULL;
     END IF;

     IF E1 /= E2 THEN           -- ERROR: COMPARISON NOT ALLOWED.
          NULL;
     END IF;

     IF E1 = 2 THEN             -- ERROR: TYPE MISMATCH.
          NULL;
     END IF;

     IF LP1 = LP2 THEN          -- ERROR: COMPARISON NOT ALLOWED.
          NULL;
     END IF;

     IF P1.ALL /= P2.ALL THEN   -- ERROR: COMPARISON NOT ALLOWED.
          NULL;
     END IF;

END B74404A;
