-- BC3205D1M.DEP

-- OBJECTIVE:
--     CHECK THAT AN INSTANTIATION IS ILLEGAL IF A FORMAL LIMITED/NON-
--     LIMITED PRIVATE TYPE IS USED IN AN ALLOCATOR, A VARIABLE OBJECT
--     DECLARATION, A RECORD COMPONENT DECLARATION, OR AN ARRAY TYPE
--     DEFINITION WHEN THE ACTUAL PARAMETER IS AN UNCONSTRAINED ARRAY
--     TYPE OR AN UNCONSTRAINED TYPE WITH DISCRIMINANTS THAT DO NOT HAVE
--     DEFAULTS.

--     TEST WHEN THE INSTANTIATIONS ARE IN A SEPARATELY COMPILED UNIT
--     WHICH IS COMPILED BEFORE THE GENERIC BODY.

-- APPLICABILITY CRITERIA:
--     AN IMPLEMENTATION MAY REQUIRE THAT GENERIC UNIT BODIES BE
--     COMPILED TOGETHER WITH THEIR SPECIFICATIONS (RM 10.3/9).  IF AN
--     IMPLEMENTATION TAKES ADVANTAGE OF THIS RULE, THIS TEST IS
--     INAPPLICABLE.

-- FILES ASSOCIATED WITH THIS TEST ARE:
--   BC3205D0.DEP  -- THE GENERIC PACKAGE SPECIFICATION.
--   BC3205D1M.DEP -- PROCEDURE BC3205D1M CONTAINING THE
--                 -- INSTANTIATIONS.
--   BC3205D2.DEP  -- THE GENERIC PACKAGE BODY.

-- HISTORY:
--     SPS 07/14/82  CREATED ORIGINAL TEST.
--     JBG 04/29/85
--     BCB 12/28/87  MODIFIED HEADER.

--          **************************************************
-- AS A RESULT OF ADA COMMENTARY AI-00037, INSTANTIATIONS ARE ALWAYS
-- LEGAL IF THE FORMAL PARAMETER IS A PRIVATE TYPE WITHOUT DISCRIMINANTS
-- AND THE ACTUAL PARAMETER IS A TYPE WITH DEFAULT DISCRIMINANTS.
--          **************************************************

WITH BC3205D0;
PROCEDURE BC3205D1M IS

     TYPE UARR IS ARRAY(INTEGER RANGE <>) OF INTEGER;
     TYPE CARR IS ARRAY(INTEGER RANGE 1..3) OF INTEGER;
     TYPE REC(D : INTEGER) IS RECORD NULL; END RECORD;
     TYPE DREC(D : INTEGER := 3) IS RECORD NULL; END RECORD;
     SUBTYPE CREC IS REC(4);
     REC1 : DREC;
     REC2 : REC (D => 3);
     AR1 : CARR;
     AR2 : UARR (1 .. 3);

-- THE INSTANTIATIONS MARKED "ILLEGAL" ARE ILLEGAL BECAUSE OF THE USE OF
-- A GENERIC ACTUAL PARAMETER IN THE GENERIC UNIT BODY.

     PACKAGE N1 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          CREC, CREC, CREC, CREC);                       -- OK.
     PACKAGE N2 IS NEW BC3205D0(REC, CREC, CREC, CREC,
          CREC, CREC, CREC, CREC);                       -- ILLEGAL: REC
     PACKAGE N3 IS NEW BC3205D0(CREC, REC, CREC, CREC,
          CREC, CREC, CREC, CREC);                       -- ILLEGAL: REC
     PACKAGE N4 IS NEW BC3205D0(CREC, CREC, REC, CREC,
          CREC, CREC, CREC, CREC);                       -- ILLEGAL: REC
     PACKAGE N5 IS NEW BC3205D0(CREC, CREC, CREC, REC,
          CREC, CREC, CREC, CREC);                       -- ILLEGAL: REC
     PACKAGE N6 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          REC, CREC, CREC, CREC);                        -- ILLEGAL: REC
     PACKAGE N7 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          CREC, REC, CREC, CREC);                        -- ILLEGAL: REC
     PACKAGE N8 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          CREC, CREC, REC, CREC);                        -- ILLEGAL: REC
     PACKAGE N9 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          CREC, CREC, CREC, REC);                        -- ILLEGAL: REC
     PACKAGE N12 IS NEW BC3205D0(DREC, CREC, CREC, CREC,
          CREC, CREC, CREC, CREC);                      -- OK. AI-00037.
     PACKAGE N13 IS NEW BC3205D0(CREC, DREC, CREC, CREC,
          CREC, CREC, CREC, CREC);                      -- OK. AI-00037.
     PACKAGE N14 IS NEW BC3205D0(CREC, CREC, DREC, CREC,
          CREC, CREC, CREC, CREC);                      -- OK. AI-00037.
     PACKAGE N15 IS NEW BC3205D0(CREC, CREC, CREC, DREC,
          CREC, CREC, CREC, CREC);                      -- OK. AI-00037.
     PACKAGE N16 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          DREC, CREC, CREC, CREC);                      -- OK. AI-00037.
     PACKAGE N17 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          CREC, DREC, CREC, CREC);                      -- OK. AI-00037.
     PACKAGE N18 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          CREC, CREC, DREC, CREC);                      -- OK. AI-00037.
     PACKAGE N19 IS NEW BC3205D0(CREC, CREC, CREC, CREC,
          CREC, CREC, CREC, DREC);                      -- OK. AI-00037.

     PACKAGE P1 IS NEW BC3205D0(CARR, CARR, CARR, CARR,
          CARR, CARR, CARR, CARR);                       -- OK.
     PACKAGE P2 IS NEW BC3205D0(UARR, CARR, CARR, CARR,
          CARR, CARR, CARR, CARR);                       -- ILLEGAL: UAR
     PACKAGE P3 IS NEW BC3205D0(CARR, UARR, CARR, CARR,
          CARR, CARR, CARR, CARR);                       -- ILLEGAL: UAR
     PACKAGE P4 IS NEW BC3205D0(CARR, CARR, UARR, CARR,
          CARR, CARR, CARR, CARR);                       -- ILLEGAL: UAR
     PACKAGE P5 IS NEW BC3205D0(CARR, CARR, CARR, UARR,
          CARR, CARR, CARR, CARR);                       -- ILLEGAL: UAR
     PACKAGE P6 IS NEW BC3205D0(CARR, CARR, CARR, CARR,
          UARR, CARR, CARR, CARR);                       -- ILLEGAL: UAR
     PACKAGE P7 IS NEW BC3205D0(CARR, CARR, CARR, CARR,
          CARR, UARR, CARR, CARR);                       -- ILLEGAL: UAR
     PACKAGE P8 IS NEW BC3205D0(CARR, CARR, CARR, CARR,
          CARR, CARR, UARR, CARR);                       -- ILLEGAL: UAR
     PACKAGE P9 IS NEW BC3205D0(CARR, CARR, CARR, CARR,
          CARR, CARR, CARR, UARR);                       -- ILLEGAL: UAR

BEGIN
     NULL;
END BC3205D1M;
