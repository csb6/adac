-- AVAT009.ADA

-- CHECK WHETHER SHORT_FLOAT IS SUPPORTED.
-- IF SO, THIS UNIT WILL REPLACE THE PREVIOUSLY COMPILED AVAT008.

-- PWB 01/15/87  CREATED ORIGINAL TEST.
-- TBN 03/25/87  CHANGED FORMAT.

WITH DATA_COLLECTION, TEXT_IO; USE DATA_COLLECTION, TEXT_IO;

PROCEDURE AVAT008 IS

     PACKAGE FLT_IO IS NEW FLOAT_IO(SHORT_FLOAT);
     USE FLT_IO;

     X : SHORT_FLOAT;
     TESTED : THINGS_TO_SUPPORT := SHORT_FLO;
     LINE1 : CONSTANT STRING := "     SHORT_FLOAT IS SUPPORTED.";
     LINE2 : CONSTANT STRING := "          'DIGITS IS" &
                                INTEGER'IMAGE (SHORT_FLOAT'DIGITS) &
                                "          RANGE IS ";
     DOTS : CONSTANT STRING := " ..";
     VALUE_LENGTH : CONSTANT NATURAL := DEFAULT_FORE + DEFAULT_AFT +
                                                       DEFAULT_EXP + 4;
     IMAGE_LEN : CONSTANT TEXT_IO.FIELD := DOTS'LENGTH +
                                           2 * (VALUE_LENGTH);
     FIRST_IMAGE,
     LAST_IMAGE   : STRING (1 .. VALUE_LENGTH);
     LINE3 : STRING (1 .. IMAGE_LEN + 10);
BEGIN
     PUT (FIRST_IMAGE, SHORT_FLOAT'FIRST);
     PUT (LAST_IMAGE, SHORT_FLOAT'LAST);
     LINE3 := (1..10 => ' ') & FIRST_IMAGE & DOTS & LAST_IMAGE;

     FEATURE (TESTED) := (3, ((LINE1'LENGTH, LINE1),
                              (LINE2'LENGTH, LINE2),
                              (LINE3'LENGTH, LINE3)));
END AVAT008;
