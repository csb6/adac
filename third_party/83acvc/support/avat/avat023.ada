-- AVAT023.ADA

-- CHECK WHETHER SYSTEM.FINE_DELTA IS AS SPECIFIED.
-- IF SO, THIS UNIT WILL BE REPLACED.

-- PWB 08/11/87  CREATED ORIGINAL TEST FILE.

WITH DATA_COLLECTION, SYSTEM, TEXT_IO;
USE DATA_COLLECTION, TEXT_IO;

PROCEDURE AVAT023 IS

     PACKAGE IO IS NEW FLOAT_IO (FLOAT);
     USE IO;

     TYPE FIXED IS DELTA 0.25 RANGE -1.0 .. 1.0;
     TESTED : THINGS_TO_SUPPORT := CHECK_FINE_DELTA;

     VALUE_DESCR : CONSTANT STRING := "SYSTEM.FINE_DELTA =";
     VALUE_LENGTH : CONSTANT NATURAL := DEFAULT_FORE + DEFAULT_AFT +
                                        DEFAULT_EXP + 4;
     DELTA_IMAGE  : STRING (1 .. VALUE_LENGTH);
     RANGE_DESCR  :CONSTANT STRING := " AND RANGE -1.0 .. 1.0";
     REJECT_LEN : CONSTANT TEXT_IO.FIELD := VALUE_LENGTH +
                                            RANGE_DESCR'LENGTH;

     LINE1 : CONSTANT STRING := "     SYSTEM.FINE_DELTA DOES NOT " &
                                " HAVE SPECIFIED BEHAVIOR";
     LINE2 : STRING (1 .. 10+VALUE_DESCR'LENGTH+VALUE_LENGTH) :=
                    (1 .. 10+VALUE_DESCR'LENGTH+VALUE_LENGTH => ' ');
     LINE3 : CONSTANT STRING := "          DECLARATION REJECTED WITH " &
                                "DELTA ";
     LINE4 : STRING (1 .. 10+REJECT_LEN) := (1 .. 10+REJECT_LEN => ' ');

BEGIN
     LINE2 (11..10+VALUE_DESCR'LENGTH) := VALUE_DESCR;
     PUT ( LINE2(11+VALUE_DESCR'LENGTH..LINE2'LENGTH),
           FLOAT(SYSTEM.FINE_DELTA));
     PUT ( LINE4(11..10+VALUE_LENGTH), FLOAT (SYSTEM.FINE_DELTA));
     LINE2(11..10+VALUE_DESCR'LENGTH) := VALUE_DESCR;
     LINE4(11+VALUE_LENGTH .. LINE4'LENGTH) := RANGE_DESCR;
     FEATURE (TESTED) := (4, ((LINE1'LENGTH, LINE1),
                              (LINE2'LENGTH, LINE2),
                              (LINE3'LENGTH, LINE3),
                              (LINE4'LENGTH, LINE4)) );
END AVAT023;
