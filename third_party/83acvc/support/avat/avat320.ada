-- AVAT320.ADA

-- CHECK WHETHER COMPILATION OF A PACKAGE BODY SUBUNIT OF A GENERIC
-- PROCEDURE APART FROM THE PACKAGE SPECIFICATION IS SUPPORTED.
-- IF SO, THIS UNIT WILL BE REPLACED.

-- FILES FOR THIS SUBTEST:
--     AVAT320.ADA: GENERIC PROCEDURE DECLARATION WITH A PACKAGE BODY
--                   SUBUNIT.  (THIS FILE)
--     AVAT321.ADA: SUBUNIT PROPER BODY FOR PACKAGE PAC1.
--     AVAT322.ADA: MAIN PROCEDURE WITH INSTANTIATION OF GENERIC PROC.

-- TBN 03/26/87
-- PWB 08/19/87  RENUMBERED.
-- TBN 11/22/87  CHANGED TESTING METHOD.

WITH DATA_COLLECTION; USE DATA_COLLECTION;
GENERIC
PROCEDURE AVAT320;

PROCEDURE AVAT320 IS
     TESTED : THINGS_TO_SUPPORT := PACK_SUBUNIT_OF_GEN;
     PACKAGE PAC1 IS
          FUNCTION F RETURN SUPPORT_RECORD;
     END PAC1;

     PACKAGE BODY PAC1 IS SEPARATE;
BEGIN
     FEATURE (TESTED) := PAC1.F;
END AVAT320;

SEPARATE (AVAT320)
PACKAGE BODY PAC1 IS
     FUNCTION F RETURN SUPPORT_RECORD IS
          LINE1 : CONSTANT STRING := "     COMPILATION OF A " &
                                     "PACKAGE BODY SUBUNIT OF A ";
          LINE2 : CONSTANT STRING := "     GENERIC SUBPROGRAM " &
                                     "APART FROM ITS SPEC IS " &
                                     "NOT SUPPORTED.";
          LINE3 : CONSTANT STRING := "          THIS INDICATES " &
                                     "THAT THE FOLLOWING TEST " &
                                     "IS INAPPLICABLE:";
          LINE4 : CONSTANT STRING := "               CA3011A";
     BEGIN
          RETURN (4, ((LINE1'LENGTH, LINE1),
                      (LINE2'LENGTH, LINE2),
                      (LINE3'LENGTH, LINE3),
                      (LINE4'LENGTH, LINE4)));
     END F;
END PAC1;
