-- CD2B11E.ADA

-- OBJECTIVE:
--     CHECK THAT THE EXPRESSION IN A COLLECTION SIZE CLAUSE
--     FOR AN ACCESS TYPE IN A GENERIC UNIT NEED NOT BE STATIC.

-- HISTORY:
--     BCB 09/23/87  CREATED ORIGINAL TEST.
--     PWB 05/11/89  CHANGED EXTENSION FROM '.DEP' TO '.ADA'.

WITH REPORT;  USE REPORT;

PROCEDURE CD2B11E IS

     B : BOOLEAN;

BEGIN

     TEST ("CD2B11E", "CHECK THAT THE EXPRESSION IN A COLLECTION " &
                      "SIZE CLAUSE FOR AN ACCESS TYPE IN A " &
                      "GENERIC UNIT NEED NOT BE STATIC");

     DECLARE

          GENERIC
          FUNCTION FUNC RETURN BOOLEAN;

          FUNCTION FUNC RETURN BOOLEAN IS

               TYPE TEST_TYPE IS ACCESS INTEGER;
               FOR TEST_TYPE'STORAGE_SIZE USE 256;

               TYPE ACC_TYPE IS ACCESS INTEGER;
               FOR ACC_TYPE'STORAGE_SIZE
                                USE IDENT_INT (256);

          BEGIN -- FUNC.

               IF ACC_TYPE'STORAGE_SIZE < IDENT_INT (256) THEN
                    FAILED ("INCORRECT VALUE FOR STORAGE_SIZE");
               END IF;

               RETURN TRUE;

          END FUNC;

     FUNCTION NEWFUNC IS NEW FUNC;

     BEGIN
          B := NEWFUNC;
     END;

     RESULT;
END CD2B11E;
