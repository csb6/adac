-- C45613B.DEP

-- OBJECTIVE:
--     CHECK THAT NUMERIC_ERROR/CONSTRAINT_ERROR IS RAISED
--     BY "**" FOR SHORT_INTEGER WHEN THE RESULT EXCEEDS THE RANGE
--     OF THE BASE TYPE.

-- APPLICABILITY CRITERIA:
--     THIS TEST IS APPLICABLE TO THOSE IMPLEMENTATIONS WHICH SUPPORT
--     SHORT_INTEGER.

--     IF "SHORT_INTEGER" IS NOT SUPPORTED, THEN THE DECLARATION OF
--     "CHECK_SHORT" MUST BE REJECTED.

-- HISTORY:
--     HTG 10/06/86 CREATED ORIGINAL TEST.
--     DHH 01/13/88 ADDED APPLICABILITY CRITERIA AND STANDARD HEADER.

WITH REPORT; USE REPORT;
PROCEDURE C45613B IS

    CHECK_SHORT : SHORT_INTEGER;                   -- N/A => ERROR.

    FUNCTION IDENT (X : SHORT_INTEGER) RETURN SHORT_INTEGER IS
    BEGIN
         RETURN SHORT_INTEGER (IDENT_INT (INTEGER (X)));
    END IDENT;

BEGIN
     TEST ("C45613B","CHECK THAT NUMERIC_ERROR/CONSTRAINT_ERROR " &
                     "IS RAISED BY ""**"" FOR SHORT_INTEGER WHEN " &
                     "THE RESULT EXCEEDS THE RANGE OF THE BASE TYPE");

     DECLARE
          INT : SHORT_INTEGER;
     BEGIN
          INT := IDENT(SHORT_INTEGER'LAST ** IDENT_INT(2));
                 FAILED ("NO EXCEPTION FOR SECOND POWER OF " &
                         "SHORT_INTEGER'LAST");

          EXCEPTION
               WHEN NUMERIC_ERROR | CONSTRAINT_ERROR =>
                    NULL;
               WHEN OTHERS =>
                    FAILED ("WRONG EXCEPTION RAISED FOR " &
                            "SECOND POWER OF " &
                            "SHORT_INTEGER'LAST");
     END;

     DECLARE
          INT : SHORT_INTEGER;
     BEGIN
          INT := IDENT(SHORT_INTEGER'FIRST ** IDENT_INT(3));
          FAILED ("NO EXCEPTION FOR THIRD POWER OF " &
                  "SHORT_INTEGER'FIRST");

          EXCEPTION
               WHEN NUMERIC_ERROR | CONSTRAINT_ERROR =>
                    NULL;
               WHEN OTHERS =>
                    FAILED ("WRONG EXCEPTION RAISED FOR " &
                            "THIRD POWER OF " &
                            "SHORT_INTEGER'FIRST");

     END;

     RESULT;

END C45613B;
