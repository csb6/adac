-- C45613C.DEP

-- OBJECTIVE:
--     CHECK THAT NUMERIC_ERROR/CONSTRAINT_ERROR IS RAISED
--     BY "**" FOR LONG_INTEGER WHEN THE RESULT EXCEEDS THE RANGE
--     OF THE BASE TYPE.

-- APPLICABILITY CRITERIA:
--     THIS TEST IS APPLICABLE TO THOSE IMPLEMENTATIONS WHICH SUPPORT
--     LONG_INTEGER.

--     IF "LONG_INTEGER" IS NOT SUPPORTED, THEN THE DECLARATION OF
--     "CHECK_LONG" MUST BE REJECTED.

-- HISTORY:
--     HTG 10/06/86 CREATED ORIGINAL TEST.
--     DHH 01/13/88 ADDED APPLICABILITY CRITERIA AND STANDARD HEADER.

WITH REPORT; USE REPORT;
PROCEDURE C45613C IS

     CHECK_LONG : LONG_INTEGER;                      -- N/A => ERROR.

     FUNCTION IDENT (X : LONG_INTEGER) RETURN LONG_INTEGER IS
     BEGIN
          RETURN LONG_INTEGER (IDENT_INT (INTEGER (X)));
     END IDENT;

BEGIN
     TEST ("C45613C","CHECK THAT NUMERIC_ERROR/CONSTRAINT_ERROR " &
                     "IS RAISED BY ""**"" FOR LONG_INTEGER WHEN " &
                     "THE RESULT EXCEEDS THE RANGE OF THE BASE TYPE");

     DECLARE
          INT : LONG_INTEGER;
     BEGIN
          INT := IDENT(LONG_INTEGER'LAST ** IDENT_INT(2));
          FAILED ("NO EXCEPTION FOR SECOND POWER OF " &
                  "LONG_INTEGER'LAST");

          EXCEPTION
               WHEN NUMERIC_ERROR | CONSTRAINT_ERROR =>
                    NULL;
               WHEN OTHERS =>
                    FAILED ("WRONG EXCEPTION RAISED FOR " &
                            "SECOND POWER OF " &
                            "LONG_INTEGER'LAST");
     END;

     DECLARE
          INT : LONG_INTEGER;
     BEGIN
          INT := IDENT(LONG_INTEGER'FIRST ** IDENT_INT(3));
                 FAILED ("NO EXCEPTION FOR THIRD POWER OF " &
                         "LONG_INTEGER'FIRST");
          EXCEPTION
               WHEN NUMERIC_ERROR | CONSTRAINT_ERROR =>
                    NULL;
               WHEN OTHERS =>
                    FAILED ("WRONG EXCEPTION RAISED FOR " &
                            "THIRD POWER OF " &
                            "LONG_INTEGER'FIRST");

     END;

     RESULT;

END C45613C;
