-- C45612C.DEP

-- OBJECTIVE:
--     CHECK THAT EXPONENTIATION OF TYPE LONG_INTEGER TO LARGE POWERS IS
--     CORRECTLY EVALUATED.

-- APPLICABILITY CRITERIA:
--     THIS TEST IS APPLICABLE ONLY TO THOSE IMPLEMENTATIONS WHICH
--     SUPPORT LONG_INTEGER.

--     IF LONG_INTEGER IS NOT SUPPORTED, THEN THE DECLARATION OF
--     CHECK_LONG MUST BE REJECTED.

-- HISTORY:
--     BCB 07/26/88  CREATED ORIGINAL TEST.

WITH REPORT; USE REPORT;

PROCEDURE C45612C IS

     CHECK_LONG : LONG_INTEGER;                        -- N/A => ERROR.

     A, F : LONG_INTEGER := 2;

     B : LONG_INTEGER;

     C : LONG_INTEGER := 1;

     D : LONG_INTEGER := -1;

     E : LONG_INTEGER := 0;

     FUNCTION IDENT_LONG (X : LONG_INTEGER) RETURN LONG_INTEGER IS
     BEGIN
          IF EQUAL(INTEGER(X),INTEGER(X)) THEN
               RETURN X;
          END IF;
          RETURN 0;
     END IDENT_LONG;

BEGIN
     TEST ("C45612C", "CHECK THAT EXPONENTIATION OF TYPE LONG_INTEGER" &
                      " TO LARGE POWERS IS CORRECTLY EVALUATED");

     IF (C**INTEGER'LAST) /= IDENT_LONG (1)
          THEN FAILED ("IMPROPER VALUE FOR 1**INTEGER'LAST");
     END IF;

     IF (C**(INTEGER'LAST-1)) /= IDENT_LONG (1)
          THEN FAILED ("IMPROPER VALUE FOR 1**(INTEGER'LAST-1)");
     END IF;

     IF (INTEGER'LAST MOD 2) /= IDENT_INT (0) THEN
          IF ((D)**INTEGER'LAST) /= IDENT_LONG (-1)
               THEN FAILED ("IMPROPER VALUE FOR -1**INTEGER'LAST");
          END IF;
          IF ((D)**(INTEGER'LAST-1)) /= IDENT_LONG (1)
               THEN FAILED ("IMPROPER VALUE FOR " &
                            "-1**(INTEGER'LAST-1)");
          END IF;
     ELSE
          IF ((D)**INTEGER'LAST) /= IDENT_LONG (1)
               THEN FAILED ("IMPROPER VALUE FOR -1**INTEGER'LAST");
          END IF;
          IF ((D)**(INTEGER'LAST-1)) /= IDENT_LONG (-1)
               THEN FAILED ("IMPROPER VALUE FOR " &
                            "-1**(INTEGER'LAST-1)");
          END IF;
     END IF;

     IF (E**INTEGER'LAST) /= IDENT_LONG (0)
          THEN FAILED ("IMPROPER VALUE FOR 0**INTEGER'LAST");
     END IF;

     IF (E**(INTEGER'LAST-1)) /= IDENT_LONG (0)
          THEN FAILED ("IMPROPER VALUE FOR 0**(INTEGER'LAST-1)");
     END IF;

     B := LONG_INTEGER'SIZE-2;

     FOR I IN 1 .. B-1
          LOOP
               A := A * 2;
          END LOOP;

     IF (F**(LONG_INTEGER'SIZE-2)) /= A
          THEN FAILED ("IMPROPER VALUE FOR 2**(LONG_INTEGER'SIZE-2)");
     END IF;

     RESULT;
END C45612C;
