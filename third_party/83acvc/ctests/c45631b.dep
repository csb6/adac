-- C45631B.DEP

-- OBJECTIVE:
--     CHECK THAT FOR TYPE SHORT_INTEGER 'ABS A' EQUALS A IF A IS
--     POSITIVE AND EQUALS -A IF A IS NEGATIVE.

-- APPLICABILITY CRITERIA:
--     THIS TEST IS APPLICABLE TO THOSE IMPLEMENTATIONS WHICH SUPPORT
--     SHORT_INTEGER.

--     IF "SHORT_INTEGER" IS NOT SUPPORTED, THEN THE DECLARATION OF
--     "CHECK_SHORT" MUST BE REJECTED.

-- HISTORY:
--     RJW 02/26/86 CREATED ORIGINAL TEST.
--     DHH 01/13/88 ADDED APPLICABILITY CRITERIA AND STANDARD HEADER.

WITH REPORT; USE REPORT;

PROCEDURE C45631B IS

     CHECK_SHORT : SHORT_INTEGER;                   -- N/A => ERROR.

     FUNCTION IDENT (X : SHORT_INTEGER) RETURN SHORT_INTEGER IS
     BEGIN
          RETURN SHORT_INTEGER (IDENT_INT (INTEGER (X)));
     END IDENT;

BEGIN

     TEST ( "C45631B", "CHECK THAT FOR TYPE SHORT_INTEGER 'ABS A' " &
                       "EQUALS A IF A IS POSITIVE AND EQUALS -A IF " &
                       "A IS NEGATIVE" );

     DECLARE

          P : SHORT_INTEGER := IDENT (1);
          N : SHORT_INTEGER := IDENT (-1);
          Z : SHORT_INTEGER := IDENT (0);
     BEGIN

          IF ABS P = P THEN
               NULL;
          ELSE
               FAILED ( "'ABS' TEST FOR P - 1" );
          END IF;

          IF ABS N = -N THEN
               NULL;
          ELSE
               FAILED ( "'ABS' TEST FOR N - 1" );
          END IF;

          IF ABS Z = Z THEN
               NULL;
          ELSE
               FAILED ( "'ABS TEST FOR Z - 1" );
          END IF;

          IF ABS (Z) = -Z THEN
               NULL;
          ELSE
               FAILED ( "'ABS TEST FOR Z - 2");
          END IF;

          IF "ABS" (RIGHT => P) = P THEN
               NULL;
          ELSE
               FAILED ( "'ABS' TEST FOR P - 2" );
          END IF;

          IF "ABS" (N) = -N THEN
               NULL;
          ELSE
               FAILED ( "'ABS' TEST FOR N - 2 " );
          END IF;

          IF "ABS" (Z) = Z THEN
               NULL;
          ELSE
               FAILED ( "'ABS' TEST FOR Z - 3" );
          END IF;

          IF ABS (IDENT (-SHORT_INTEGER'LAST)) = SHORT_INTEGER'LAST
             THEN
               NULL;
          ELSE
               FAILED ( "'ABS' TEST FOR -SHORT_INTEGER'LAST" );
          END IF;
     END;

     RESULT;

END C45631B;
