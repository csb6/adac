-- C87B35A.ADA
    
-- CHECK THAT OVERLOADING RESOLUTION USES THE RULE THAT:
--
-- MULTIPLICATION AND DIVISION OF THE SAME OR OF DIFFERENT FIXED POINT 
-- TYPES IS EXACT AND DELIVERS A RESULT OF THE TYPE UNIVERSAL_FIXED
-- WHOSE DELTA IS ARBITRARILY SMALL. THE RESULT OF ANY SUCH FIXED
-- POINT MULTIPLICATION OR DIVISION MUST ALWAYS BE EXPLICITLY 
-- CONVERTED TO SOME NUMERIC TYPE.
  
-- TRH  8 SEPT 82
  
WITH REPORT; USE REPORT;
   
PROCEDURE C87B35A IS
     
     TYPE FLAG  IS (PASS, FAIL);
     TYPE FIXED  IS DELTA 1.0 RANGE 0.0 .. 4.0;
     TYPE TEMPS  IS NEW DURATION;
     TYPE TEMPUS IS NEW TEMPS;
  
     GENERIC
          TYPE T IS PRIVATE;
          ARG  : IN T;
          STAT : IN FLAG;
     FUNCTION F1 RETURN T;
 
     FUNCTION F1 RETURN T IS
     BEGIN 
          IF STAT = FAIL THEN 
               FAILED ("RESOLUTION INCORRECT FOR OPERANDS OF " &
                       "FIXED POINT MULTIPLICATION AND DIVISION");
          END IF;
          RETURN ARG;
     END F1;
  
     FUNCTION F IS NEW F1 (FLOAT,    2.0, PASS);
     FUNCTION F IS NEW F1 (FIXED,    1.0, FAIL);
     FUNCTION F IS NEW F1 (TEMPS,    1.0, FAIL);
     FUNCTION F IS NEW F1 (TEMPUS,   1.0, FAIL);
     FUNCTION F IS NEW F1 (DURATION, 1.0, FAIL);
    
BEGIN
     TEST ("C87B35A","OVERLOADED OPERANDS IN FIXED POINT MULTI" &
           "PLICATION AND FIXED POINT DIVISION");
 
     IF (1.0 * F) /= 2.0 OR (F * 1.0)   /= 2.0 OR
        (F / 1.0) /= 2.0 OR (1.0 / F)   /= 0.5 OR
        (F * F)   /= 4.0 OR (F * F) / F /= 2.0 THEN
        FAILED ("RESOLUTION INCORRECT FOR FIXED POINT OPERANDS");
     END IF;
    
     RESULT;
END C87B35A;
