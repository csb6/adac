-- C45641Y.DEP

-- OBJECTIVE:
--     TESTS THE "ABS" FUNCTION USING THREE SUBTESTS.

--       (A) A >=0.0 ABS(A)=A FOR MODEL NUMBERS.
--       (B) A <=0.0 ABS(A)=-A FOR MODEL NUMBERS.
--       (C) WITHIN CORRECT MODEL INTERVAL FOR OTHER VALUES.
--     THIS TEST IS REPEATED FOR DIGITS = 5 .. 29.

-- APPLICABILITY CRITERIA:
--     THIS TEST IS APPLICABLE ONLY TO IMPLEMENTATIONS WHICH SUPPORT
--     A VALUE OF DIGITS GREATER THAN OR EQUAL TO 29.

--     IF 'DIGITS 29' IS NOT SUPPORTED, THEN THE DECLARATION OF 'TYPE F'
--     MUST BE REJECTED.

-- HISTORY:
--     BAW 09/17/80 CREATED ORIGINAL TEST.
--     JBG 11/11/82
--     JRK 03/20/86 RENAMED FROM C45424*-B.DEP.
--                  REMOVED UNUSED VARIABLE EPS.
--     DHH 01/14/88 ADDED APPLICABILITY CRITERIA AND STANDARD HEADER.

WITH REPORT; USE REPORT;
PROCEDURE C45641Y IS

     TYPE F IS DIGITS 29;                             -- N/A => ERROR.
     A1 : F := 0.0;
     A2 : F := 0.0;    -- F'LARGE
     B1 : F := 0.0;
     B2 : F := 0.0;
     C1 : F := 0.0;
     C2 : F := 0.0;

BEGIN

     TEST ("C45641Y", "CHECK ABS FOR FLOATING POINT");

     COMMENT ("ABS(A), FOR A >= 0.0 AND MODEL NUMBER" );

     IF EQUAL (2,2) THEN
          A1 := 0.5;
          A2 := 16#0.FFFFFFFFFFFFFFFFFFFFFFFFC#E98;
          C1 := 0.1;               -- IS 16#0.19999...#
     END IF;

     IF EQUAL (1,1) THEN
          B1 := -A1;
          B2 := -A2;
          C2 := -C1;
     END IF;

     IF ABS(A2) /= 16#0.FFFFFFFFFFFFFFFFFFFFFFFFC#E98
     OR ABS(A1) /= 0.5 THEN
          FAILED( "ABS(A) INCORRECT" );
     END IF;  --(A)

     COMMENT ("ABS(A), FOR A <= 0.0 AND MODEL NUMBER" );

     IF ABS(B2) /= 16#0.FFFFFFFFFFFFFFFFFFFFFFFFC#E98
     OR ABS(B1) /= 0.5 THEN
          FAILED( "ABS(A) INCORRECT" );
     END IF;  --(B)

     COMMENT ("ABS(A) FOR NON MODEL NUMBERS" );

     IF ABS( ABS(C1) - C1) > 16#0.8#E-25 OR
        ABS( ABS(C2) + C2) > 16#0.8#E-25 THEN
          FAILED( "ABS(A) INCORRECT" );
     END IF;  --(C)

     RESULT;

END C45641Y;
