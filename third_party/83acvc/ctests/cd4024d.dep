-- CD4024D.DEP

-- OBJECTIVE:
--     CHECK WHETHER A COMPONENT CLAUSE GIVEN FOR A FIXED POINT
--     COMPONENT WITH ONLY A DELTA CONSTRAINT CAN SPECIFY LESS SPACE
--     THAN USUALLY ALLOCATED TO A VARIABLE OF THAT SUBTYPE.  THIS TEST
--     CHECKS A BIASED REPRESENTATION.

-- APPLICABILITY CRITERIA:
--     THIS TEST IS APPLICABLE TO IMPLEMENTATIONS WHICH SUPPORT
--     COMPONENT CLAUSES AS SPECIFIED ABOVE.

--     IF SUCH COMPONENT CLAUSES ARE NOT SUPPORTED, THEN THE
--     RECORD REPRESENTATION CLAUSE FOR REC MUST BE REJECTED.

-- HISTORY:
--     BCB 09/14/88  CREATED ORIGINAL TEST.
--     DHH 03/29/89  CHANGE FROM 'A' TEST TO 'C' TEST AND ADDED CHECK
--                   ON REPRESENTATION CLAUSE.

WITH REPORT; USE REPORT;
WITH LENGTH_CHECK;                      -- CONTAINS A CALL TO 'FAILED'.
PROCEDURE CD4024D IS

     TYPE FIX IS DELTA 2.0**(-4) RANGE 10000.0 .. 10001.0;

     SUBTYPE SUBFIX IS FIX DELTA 2.0**(-1);

     CHECK_SIZE : CONSTANT INTEGER := 2;

     TYPE REC IS RECORD
          RECVAR : SUBFIX;
     END RECORD;

     FOR REC USE RECORD
          RECVAR AT 0 RANGE 0 .. CHECK_SIZE-1;         -- N/A => ERROR.
     END RECORD;

     T : REC := (RECVAR => 10001.0);

     PROCEDURE CHECK_1 IS NEW LENGTH_CHECK (REC);

BEGIN
     TEST ("CD4024D", "CHECK WHETHER A COMPONENT CLAUSE GIVEN " &
                      "FOR A FIXED POINT COMPONENT WITH ONLY A DELTA " &
                      "CONSTRAINT CAN SPECIFY LESS SPACE THAN " &
                      "USUALLY ALLOCATED TO A VARIABLE OF THAT " &
                      "SUBTYPE.  THIS TEST CHECKS A BIASED " &
                      "REPRESENTATION");

     CHECK_1 (T, 7, "REC");
     RESULT;
END CD4024D;
