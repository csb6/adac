-- CD4022D.DEP

-- OBJECTIVE:
--     CHECK WHETHER A COMPONENT CLAUSE GIVEN FOR A COMPONENT
--     WITH AN INTEGER SUBTYPE CAN SPECIFY LESS THAN THE USUAL AMOUNT
--     OF SPACE ALLOCATED TO A VARIABLE OF THAT SUBTYPE.  THIS TEST
--     CHECKS A BIASED REPRESENTATION.

-- APPLICABILITY CRITERIA:
--     THIS TEST IS APPLICABLE TO IMPLEMENTATIONS WHICH SUPPORT
--     COMPONENT CLAUSES AS SPECIFIED ABOVE.

--     IF SUCH COMPONENT CLAUSES ARE NOT SUPPORTED, THEN THE
--     RECORD REPRESENTATION CLAUSE FOR REC MUST BE REJECTED.

-- HISTORY:
--     BCB  09/14/88  CREATED ORIGINAL TEST.
--     DHH  03/29/89  CHANGE FROM 'A' TEST TO 'C' TEST AND ADDED
--                    CHECK ON REPRESENTATION CLAUSE.

WITH REPORT; USE REPORT;
WITH LENGTH_CHECK;                      -- CONTAINS A CALL TO 'FAILED'.
PROCEDURE CD4022D IS

     TYPE INT IS RANGE 10000 .. 10001;

     CHECK_SIZE : CONSTANT INTEGER := 2;

     TYPE REC IS RECORD
          RECVAR : INT;
     END RECORD;

     FOR REC USE RECORD
          RECVAR AT 0 RANGE 0 .. CHECK_SIZE-1;       --N/A => ERROR.
     END RECORD;

     T : REC := (RECVAR => 10001);

     PROCEDURE CHECK_1 IS NEW LENGTH_CHECK (REC);

BEGIN
     TEST ("CD4022D", "CHECK WHETHER A COMPONENT CLAUSE GIVEN " &
                      "FOR A COMPONENT WITH AN INTEGER SUBTYPE CAN " &
                      "SPECIFY LESS THAN " &
                      "THE USUAL AMOUNT OF SPACE ALLOCATED TO A " &
                      "VARIABLE OF THAT SUBTYPE.  THIS TEST CHECKS A " &
                      "BIASED REPRESENTATION");

     CHECK_1 (T, 7, "REC");

     RESULT;
END CD4022D;
