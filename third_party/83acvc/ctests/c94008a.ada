-- C94008A.ADA

-- CHECK THAT A TASK WAITING AT AN OPEN TERMINATE ALTERNATIVE
-- DOES  N O T  TERMINATE WHILE THE UNIT THE TASK DEPENDS ON
-- HAS NOT COMPLETED ITS EXECUTION.

-- WEI  3/ 4/82
-- TBN  11/25/85     RENAMED FROM C940BAA-B.ADA.

WITH REPORT;
 USE REPORT;
PROCEDURE C94008A IS
BEGIN
     TEST ("C94008A", "TERMINATION WHILE WAITING AT " &
                      "AN OPEN TERMINATE ALTERNATIVE");

BLOCK1 :
     DECLARE
          TASK T1 IS
               ENTRY E1;
          END T1;

          TASK BODY T1 IS
          BEGIN
               SELECT
                    WHEN TRUE => TERMINATE;
                    OR WHEN FALSE => ACCEPT E1;
               END SELECT;
          END T1;
     BEGIN  -- BLOCK1
          IF T1'TERMINATED THEN
               FAILED ("TASK T1 TERMINATED BEFORE OUTER UNIT HAS " &
                       "BEEN LEFT");
          END IF;
     END BLOCK1;

     RESULT;

END C94008A;
