-- C93006A.ADA

-- CHECK THAT A TASK OBJECT DECLARED IN A LIBRARY PACKAGE SPEC IS
-- ACTIVATED EVEN IF THE PACKAGE HAS NO BODY.

-- JEAN-PIERRE ROSEN 16-MAR-1984
-- JBG 6/1/84

WITH SYSTEM; USE SYSTEM;
PACKAGE C93006A0 IS
     TASK TYPE TT IS
          ENTRY E;
          PRAGMA PRIORITY(PRIORITY'LAST);
     END;
END C93006A0;

PACKAGE BODY C93006A0 IS
     TASK BODY TT IS
     BEGIN
          ACCEPT E;
     END;
END C93006A0;

WITH C93006A0; USE C93006A0;
PRAGMA ELABORATE(C93006A0);
PACKAGE C93006A1 IS
     T : TT;
END C93006A1;

WITH REPORT, C93006A1, SYSTEM;
USE  REPORT, C93006A1, SYSTEM;
PROCEDURE C93006A IS
     PRAGMA PRIORITY(PRIORITY'FIRST);
BEGIN

     TEST("C93006A", "CHECK ACTIVATION OF TASK DECLARED IN PACKAGE " &
                     "SPECIFICATION");

     SELECT
          T.E;
     OR 
          DELAY 60.0; 
          FAILED("RENDEZVOUS NOT ACCEPTED WITHIN 60 SECONDS");
     END SELECT;

     RESULT;
END C93006A;
