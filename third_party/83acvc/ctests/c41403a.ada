-- C41403A.ADA

-- CHECK THAT THE PREFIX OF 'SIZE AND 'ADDRESS IS EVALUATED EVEN IF THE
-- VALUE DOES NOT SEEM TO BE NEEDED.

-- TBN  10/2/86

WITH SYSTEM; USE SYSTEM;
WITH REPORT; USE REPORT;
PROCEDURE C41403A IS

     TYPE ARRAY1 IS ARRAY (1 .. 4) OF INTEGER;

     OBJ_ARA : ARRAY1;
     FUNCTION_CALLED : BOOLEAN := FALSE;
     VAR1 : INTEGER;

     FUNCTION F (A : INTEGER) RETURN INTEGER IS
     BEGIN
          FUNCTION_CALLED := TRUE;
          RETURN IDENT_INT(A);
     END F;

     PROCEDURE PROC (A : ADDRESS) IS
     BEGIN
          NULL;
     END;

BEGIN
     TEST ("C41403A", "CHECK THAT THE PREFIX OF 'SIZE AND 'ADDRESS " &
                      "IS EVALUATED EVEN IF THE VALUE DOES NOT SEEM " &
                      "TO BE NEEDED");

     PROC (OBJ_ARA (F (2))'ADDRESS);
     IF NOT FUNCTION_CALLED THEN
          FAILED ("PREFIX FOR 'ADDRESS WAS NOT EVALUATED");
     END IF;

     FUNCTION_CALLED := FALSE;
     VAR1 := OBJ_ARA (F (1))'SIZE;
     IF NOT FUNCTION_CALLED THEN
          FAILED ("PREFIX FOR 'SIZE WAS NOT EVALUATED");
     END IF;

     RESULT;
END C41403A;
