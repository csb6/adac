-- C45612B.DEP

-- OBJECTIVE:
--     CHECK THAT EXPONENTIATION OF TYPE SHORT_INTEGER TO LARGE POWERS
--     IS CORRECTLY EVALUATED.

-- APPLICABILITY CRITERIA:
--     THIS TEST IS APPLICABLE ONLY TO THOSE IMPLEMENTATIONS WHICH
--     SUPPORT SHORT_INTEGER.

--     IF SHORT_INTEGER IS NOT SUPPORTED, THEN THE DECLARATION OF
--     CHECK_SHORT MUST BE REJECTED.

-- HISTORY:
--     BCB 07/26/88  CREATED ORIGINAL TEST.

WITH REPORT; USE REPORT;

PROCEDURE C45612B IS

     CHECK_SHORT : SHORT_INTEGER;                      -- N/A => ERROR.

     A, F : SHORT_INTEGER := 2;

     B : SHORT_INTEGER;

     C : SHORT_INTEGER := 1;

     D : SHORT_INTEGER := -1;

     E : SHORT_INTEGER := 0;

     FUNCTION IDENT_SHORT (X : SHORT_INTEGER) RETURN SHORT_INTEGER IS
     BEGIN
          IF EQUAL(INTEGER(X),INTEGER(X)) THEN
               RETURN X;
          END IF;
          RETURN 0;
     END IDENT_SHORT;

BEGIN
     TEST ("C45612B", "CHECK THAT EXPONENTIATION OF TYPE SHORT_" &
                      "INTEGER TO LARGE POWERS IS CORRECTLY EVALUATED");

     IF (C**INTEGER'LAST) /= IDENT_SHORT (1)
          THEN FAILED ("IMPROPER VALUE FOR 1**INTEGER'LAST");
     END IF;

     IF (C**(INTEGER'LAST-1)) /= IDENT_SHORT (1)
          THEN FAILED ("IMPROPER VALUE FOR 1**(INTEGER'LAST-1)");
     END IF;

     IF (INTEGER'LAST MOD 2) /= IDENT_INT (0) THEN
          IF ((D)**INTEGER'LAST) /= IDENT_SHORT (-1)
               THEN FAILED ("IMPROPER VALUE FOR " &
                            "-1**INTEGER'LAST");
          END IF;
          IF ((D)**(INTEGER'LAST-1)) /= IDENT_SHORT (1)
               THEN FAILED ("IMPROPER VALUE FOR " &
                            "-1**(INTEGER'LAST-1)");
          END IF;
     ELSE
          IF ((D)**INTEGER'LAST) /= IDENT_SHORT (1)
               THEN FAILED ("IMPROPER VALUE FOR " &
                            "-1**INTEGER'LAST");
          END IF;
          IF ((D)**(INTEGER'LAST-1)) /= IDENT_SHORT (-1)
               THEN FAILED ("IMPROPER VALUE FOR " &
                            "-1**(INTEGER'LAST-1)");
          END IF;
     END IF;

     IF (E**INTEGER'LAST) /= IDENT_SHORT (0)
          THEN FAILED ("IMPROPER VALUE FOR 0**INTEGER'LAST");
     END IF;

     IF (E**(INTEGER'LAST-1)) /= IDENT_SHORT (0)
          THEN FAILED ("IMPROPER VALUE FOR 0**(INTEGER'LAST-1)");
     END IF;

     B := SHORT_INTEGER'SIZE-2;

     FOR I IN 1 .. B-1
          LOOP
               A := A * 2;
          END LOOP;

     IF (F**(SHORT_INTEGER'SIZE-2)) /= A
          THEN FAILED ("IMPROPER VALUE FOR 2**(SHORT_INTEGER'SIZE-2)");
     END IF;

     RESULT;
END C45612B;
