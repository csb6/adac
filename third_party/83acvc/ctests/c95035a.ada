-- C95035A.ADA

-- CHECK THAT A TASK IS SUSPENDED IF IT REACHES AN ACCEPT STATEMENT
-- PRIOR TO ANY CALL OF THE CORRESPONDING ENTRY.

-- WEI  3/ 4/82
-- JWC 6/28/85   RENAMED FROM C950CAA-B.ADA

WITH REPORT;
 USE REPORT;
PROCEDURE C95035A IS

     SUBTYPE ARG IS NATURAL RANGE 0..9;
     SPYNUMB : NATURAL := 0;

     PROCEDURE PSPY_NUMB (DIGT: IN ARG) IS
     BEGIN
          SPYNUMB := 10*SPYNUMB+DIGT;
     END PSPY_NUMB;

     TASK T1 IS
          ENTRY E1;
          ENTRY BYE;
     END T1;

     TASK BODY T1 IS
     BEGIN
          ACCEPT E1;
          PSPY_NUMB (2);
          ACCEPT BYE;
     END T1;

     TASK T2;

     TASK BODY T2 IS
     BEGIN
          DELAY 1.0;
          PSPY_NUMB (1);
          T1.E1;
     END T2;

BEGIN

     TEST ("C95035A", "TASK SUSPENSION PRIOR TO ENTRY CALL");

     T1.BYE;

     IF SPYNUMB /= 12 THEN
          FAILED ("ERROR DURING TASK EXECUTION");
          COMMENT ("ACTUAL ORDER WAS:" & INTEGER'IMAGE(SPYNUMB));
     END IF;

     RESULT;

END C95035A;
